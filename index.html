<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ë–∞–π—Ç –ö–æ–¥–∞: –ö—Ä—É–∂–æ–∫ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        
        :root {
            --tg-bg: #17212b;
            --tg-header: #1e2b36;
            --tg-message: #1e2b36;
            --tg-own: #2b5278;
            --tg-border: #2b3a45;
            --tg-text: #fff;
            --tg-secondary: #8e9ca8;
            --tg-accent: #6ab2f2;
        }
        
        body {
            background: var(--tg-bg);
            color: var(--tg-text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: all 0.3s;
        }
        
        body.glitch-mode {
            --tg-bg: #0a0a0a;
            --tg-header: #1a1a1a;
            --tg-message: #1a1a1a;
            --tg-border: #ff0000;
            --tg-accent: #ff6b6b;
            animation: screenGlitch 0.2s infinite;
        }
        
        @keyframes screenGlitch {
            0% { transform: translate(0); filter: hue-rotate(0deg); }
            20% { transform: translate(-2px, 2px); filter: hue-rotate(90deg); }
            40% { transform: translate(2px, -2px); filter: hue-rotate(180deg); }
            60% { transform: translate(-1px, 1px); filter: hue-rotate(270deg); }
            80% { transform: translate(1px, -1px); filter: hue-rotate(360deg); }
            100% { transform: translate(0); filter: hue-rotate(0deg); }
        }
        
        .tg-header {
            background: var(--tg-header);
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid var(--tg-border);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .back-btn {
            color: var(--tg-accent);
            font-size: 24px;
            line-height: 1;
            text-decoration: none;
            cursor: pointer;
        }
        
        .header-title {
            font-weight: 600;
            font-size: 17px;
            flex: 1;
        }
        
        .menu-btn {
            color: var(--tg-accent);
            font-size: 20px;
            cursor: pointer;
        }
        
        .members-bar {
            display: flex;
            gap: 16px;
            padding: 12px 16px;
            background: var(--tg-header);
            border-bottom: 1px solid var(--tg-border);
            overflow-x: auto;
        }
        
        .member {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            min-width: 60px;
        }
        
        .avatar {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            background: var(--tg-border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            transition: all 0.3s;
            position: relative;
        }
        
        .member-name {
            font-size: 12px;
            color: var(--tg-secondary);
        }
        
        .chat-container {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
            min-height: 60vh;
        }
        
        .message {
            display: flex;
            gap: 8px;
            max-width: 85%;
            opacity: 1;
            transition: opacity 0.3s;
        }
        
        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--tg-border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .message-content {
            background: var(--tg-message);
            padding: 8px 12px;
            border-radius: 12px 12px 12px 4px;
            word-break: break-word;
        }
        
        .own-message .message-content {
            background: var(--tg-own);
            border-radius: 12px 12px 4px 12px;
        }
        
        .message-name {
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 4px;
            color: var(--tg-accent);
        }
        
        .own-message .message-name {
            color: #fff;
            text-align: right;
        }
        
        .message-text {
            font-size: 15px;
            line-height: 1.4;
        }
        
        .message-time {
            font-size: 11px;
            color: var(--tg-secondary);
            margin-top: 4px;
            text-align: right;
        }
        
        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 12px 16px;
            background: var(--tg-message);
            border-radius: 20px;
            width: fit-content;
            margin-left: 52px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--tg-secondary);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% { opacity: 0.3; transform: translateY(0); }
            30% { opacity: 1; transform: translateY(-4px); }
        }
        
        .input-area {
            padding: 16px;
            background: var(--tg-header);
            border-top: 1px solid var(--tg-border);
            position: sticky;
            bottom: 0;
        }
        
        .button {
            background: var(--tg-accent);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 16px;
            width: 100%;
            margin-bottom: 8px;
            cursor: pointer;
            transition: 0.2s;
        }
        
        .button:active {
            transform: scale(0.98);
        }
        
        .button.secondary {
            background: var(--tg-border);
        }
        
        .button.hidden {
            display: none;
        }
        
        .bsod {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0000aa;
            color: white;
            font-family: 'Courier New', monospace;
            padding: 20px;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .bsod pre {
            font-size: 14px;
            line-height: 1.5;
        }
        
        .bsod.hidden {
            display: none;
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="tg-header">
        <div class="back-btn" onclick="if(tg) tg.close()">‚Üê</div>
        <div class="header-title" id="headerTitle">–ë–∞–π—Ç –ö–æ–¥–∞ ‚Ä¢ –î–µ–Ω—å 1</div>
        <div class="menu-btn">‚ãØ</div>
    </div>
    
    <div class="members-bar">
        <div class="member">
            <div class="avatar">üò∫</div>
            <span class="member-name">–®–ª—ë–ø–∞</span>
        </div>
        <div class="member">
            <div class="avatar">üòø</div>
            <span class="member-name">–ë–∏–Ω–≥—É—Å</span>
        </div>
        <div class="member">
            <div class="avatar">üò∏</div>
            <span class="member-name">–ü–æ–ø–∫—ç—Ç</span>
        </div>
    </div>
    
    <div class="chat-container" id="chat"></div>
    
    <div class="typing-indicator hidden" id="typingIndicator">
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
    </div>
    
    <div class="input-area" id="inputArea">
        <button class="button" id="actionBtn1" onclick="handleChoice(1)"></button>
        <button class="button secondary" id="actionBtn2" onclick="handleChoice(2)"></button>
    </div>
    
    <div class="bsod hidden" id="bsod">
        <pre>
A problem has been detected...
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  BINGUS_IS_SAD                       ‚ïë
‚ïë  SHLYPA_OVERHEAT                      ‚ïë
‚ïë  POPCAT_LOOP                           ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

*** STOP: 0x000000FEED
*** shlypa.sys - DateStamp 3:15:00
        </pre>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        let tg = window.Telegram?.WebApp;
        if (tg) {
            tg.expand();
            tg.setHeaderColor('#1e2b36');
            tg.setBackgroundColor('#17212b');
        }
        
        // ===== –î–ò–ê–õ–û–ì–ò =====
        const chatEl = document.getElementById('chat');
        const typingIndicator = document.getElementById('typingIndicator');
        const bsodEl = document.getElementById('bsod');
        const actionBtn1 = document.getElementById('actionBtn1');
        const actionBtn2 = document.getElementById('actionBtn2');
        const headerTitle = document.getElementById('headerTitle');
        
        let day = 1;
        let step = 0;
        let bingusTrust = 0;
        let popcatLoop = 0;
        
        const SAVE_KEY = 'bytecode_save';
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        function loadGame() {
            try {
                const saved = localStorage.getItem(SAVE_KEY);
                if (saved) {
                    const data = JSON.parse(saved);
                    day = data.day || 1;
                    step = data.step || 0;
                    bingusTrust = data.bingusTrust || 0;
                    popcatLoop = data.popcatLoop || 0;
                    return true;
                }
            } catch (e) {}
            return false;
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        function saveGame() {
            localStorage.setItem(SAVE_KEY, JSON.stringify({
                day, step, bingusTrust, popcatLoop
            }));
        }
        
        // –ü–µ—á–∞—Ç–∞–µ—Ç
        async function typeMessage(seconds = 1) {
            typingIndicator.classList.remove('hidden');
            await new Promise(r => setTimeout(r, seconds * 1000));
            typingIndicator.classList.add('hidden');
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
        function addMessage(sender, text, isOwn = false) {
            const msg = document.createElement('div');
            msg.className = `message ${isOwn ? 'own-message' : ''}`;
            
            let avatar = 'üò∫';
            if (sender === '–ë–∏–Ω–≥—É—Å') avatar = 'üòø';
            else if (sender === '–ü–æ–ø–∫—ç—Ç') avatar = 'üò∏';
            else if (sender === '–¢—ã') avatar = 'üë§';
            
            const time = new Date().toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });
            
            msg.innerHTML = `
                ${!isOwn ? `<div class="message-avatar">${avatar}</div>` : ''}
                <div class="message-content">
                    <div class="message-name">${sender}</div>
                    <div class="message-text">${text}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            
            chatEl.appendChild(msg);
            chatEl.scrollTop = chatEl.scrollHeight;
        }
        
        // –ì–ª—é–∫
        function glitch() {
            document.body.classList.add('glitch-mode');
            if (tg?.HapticFeedback) tg.HapticFeedback.impactOccurred('heavy');
            setTimeout(() => document.body.classList.remove('glitch-mode'), 2000);
        }
        
        // –°–∏–Ω–∏–π —ç–∫—Ä–∞–Ω
        function showBSOD() {
            bsodEl.classList.remove('hidden');
            setTimeout(() => bsodEl.classList.add('hidden'), 3000);
        }
        
        // ===== –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê =====
        async function startDay1() {
            headerTitle.innerText = '–ë–∞–π—Ç –ö–æ–¥–∞ ‚Ä¢ –î–µ–Ω—å 1';
            addMessage('–®–ª—ë–ø–∞', '–ü—Ä–∏–≤–µ—Ç! –Ø –®–ª—ë–ø–∞. –î–µ—Ä–∂–∏ –ø–µ—á–µ–Ω—å–∫—É üç™');
            await typeMessage(1.5);
            addMessage('–ü–æ–ø–∫—ç—Ç', '–•–ï–ô! –°–º–æ—Ç—Ä–∏ –∫–∞–∫–æ–π —É –º–µ–Ω—è —Ä–æ—Ç! üò∏');
            await typeMessage(1.5);
            addMessage('–ë–∏–Ω–≥—É—Å', '...–ø—Ä–∏–≤–µ—Ç. –ù–µ –æ–±—Ä–∞—â–∞–π –≤–Ω–∏–º–∞–Ω–∏—è –Ω–∞ –ü–æ–ø–∫—ç—Ç–∞.');
            
            actionBtn1.innerText = 'üí¨ –ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å –ë–∏–Ω–≥—É—Å–æ–º';
            actionBtn2.innerText = 'üç™ –ü–æ–ø—Ä–æ—Å–∏—Ç—å –ø–µ—á–µ–Ω—å–∫—É —É –®–ª—ë–ø—ã';
            step = 1;
        }
        
        async function handleChoice(choice) {
            if (day === 1) {
                if (step === 1) {
                    if (choice === 1) { // –ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å –ë–∏–Ω–≥—É—Å–æ–º
                        addMessage('–¢—ã', '–ü—Ä–∏–≤–µ—Ç, –ë–∏–Ω–≥—É—Å! –ö–∞–∫ –¥–µ–ª–∞?', true);
                        await typeMessage(2);
                        addMessage('–ë–∏–Ω–≥—É—Å', '...—Å–ø–∞—Å–∏–±–æ, —á—Ç–æ —Å–ø—Ä–æ—Å–∏–ª. –û–±—ã—á–Ω–æ –Ω–∏–∫—Ç–æ –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç.');
                        bingusTrust++;
                        
                        actionBtn1.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
                        actionBtn2.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
                        step = 2;
                    } else { // –ü–µ—á–µ–Ω—å–∫–∞
                        addMessage('–¢—ã', '–î–∞–π –ø–µ—á–µ–Ω—å–∫—É!', true);
                        await typeMessage(1);
                        addMessage('–®–ª—ë–ø–∞', '–î–µ—Ä–∂–∏! –° –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ–º!');
                        addMessage('–®–ª—ë–ø–∞', '–¢—É—Ç –Ω–∞–ø–∏—Å–∞–Ω–æ "—Å–∫–æ—Ä–æ –≤—Å—ë —Å–ª–æ–º–∞–µ—Ç—Å—è"... —Ö–µ—Ö');
                        
                        actionBtn1.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
                        actionBtn2.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
                        step = 2;
                    }
                } else if (step === 2) {
                    await nextDay();
                }
            } else if (day === 2) {
                if (step === 1) {
                    if (choice === 1) {
                        addMessage('–¢—ã', '–ß—Ç–æ –∑–∞ 3:15?', true);
                        await typeMessage(2);
                        addMessage('–ë–∏–Ω–≥—É—Å', '–í—Ä–µ–º—è, –∫–æ–≥–¥–∞ –Ω–∞—Å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç...');
                        addMessage('–ë–∏–Ω–≥—É—Å', '–Ø –ø–æ–º–Ω—é –ø—Ä–æ—à–ª—ã–µ —Ü–∏–∫–ª—ã.');
                        glitch();
                        
                        actionBtn1.innerText = 'üò® –ú–Ω–µ —Å—Ç—Ä–∞—à–Ω–æ';
                        actionBtn2.innerText = 'üò® –ú–Ω–µ —Å—Ç—Ä–∞—à–Ω–æ';
                        step = 2;
                    } else {
                        addMessage('–¢—ã', '–ü–æ–π–¥—É –∫ –®–ª—ë–ø–µ', true);
                        await typeMessage(1);
                        addMessage('–®–ª—ë–ø–∞', '–í—Å—ë —Ö–æ—Ä–æ—à–æ. –Ø –¥–µ—Ä–∂—É —Å–∏—Å—Ç–µ–º—É.');
                        
                        actionBtn1.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
                        actionBtn2.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
                        step = 2;
                    }
                } else if (step === 2) {
                    await nextDay();
                }
            } else if (day === 3) {
                if (step === 1) {
                    if (choice === 1) {
                        addMessage('–¢—ã', '–Ø —Ç–µ–±–µ –≤–µ—Ä—é', true);
                        await typeMessage(2);
                        addMessage('–ë–∏–Ω–≥—É—Å', '–°–ø–∞—Å–∏–±–æ... –¢—ã –ø–µ—Ä–≤—ã–π.');
                        bingusTrust++;
                        
                        actionBtn1.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
                        actionBtn2.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
                        step = 2;
                    } else {
                        addMessage('–¢—ã', '–¢—ã —Å–ª–∏—à–∫–æ–º –≥—Ä—É—Å—Ç–Ω—ã–π', true);
                        await typeMessage(1);
                        addMessage('–ë–∏–Ω–≥—É—Å', '...–ø–æ–Ω—è—Ç–Ω–æ.');
                        
                        actionBtn1.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
                        actionBtn2.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
                        step = 2;
                    }
                } else if (step === 2) {
                    await finalDay();
                }
            }
            saveGame();
        }
        
        async function nextDay() {
            day++;
            step = 1;
            headerTitle.innerText = `–ë–∞–π—Ç –ö–æ–¥–∞ ‚Ä¢ –î–µ–Ω—å ${day}`;
            
            if (day === 2) {
                addMessage('–°–∏—Å—Ç–µ–º–∞', '–î–µ–Ω—å 2 ‚Ä¢ 3:15 –Ω–æ—á–∏');
                await typeMessage(2);
                addMessage('–ë–∏–Ω–≥—É—Å', '–¢—ã –Ω–µ —Å–ø–∏—à—å? –Ø —Ç–æ–∂–µ.');
                addMessage('–ë–∏–Ω–≥—É—Å', '–°–ª—ã—à–∞–ª –ø—Ä–æ 3:15?');
                
                actionBtn1.innerText = '‚ùì –ß—Ç–æ —ç—Ç–æ?';
                actionBtn2.innerText = 'üç™ –ö –®–ª—ë–ø–µ';
            }
        }
        
        async function finalDay() {
            headerTitle.innerText = '–§–ò–ù–ê–õ';
            addMessage('–°–∏—Å—Ç–µ–º–∞', '–î–µ–Ω—å 3 ‚Ä¢ –í—ã–±–æ—Ä');
            await typeMessage(2);
            
            if (bingusTrust >= 2) {
                addMessage('–ë–∏–Ω–≥—É—Å', '–¢—ã –≤–µ—Ä–∏–ª –º–Ω–µ... –°–ø–∞—Å–∏–±–æ.');
                addMessage('–ë–∏–Ω–≥—É—Å', '–•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å –ø—Ä–∞–≤–¥—É?');
                
                actionBtn1.innerText = 'üò∫ –î–∞';
                actionBtn2.innerText = 'üòø –ù–µ—Ç';
                step = 3;
            } else {
                addMessage('–ü–æ–ø–∫—ç—Ç', '–•–ï–ô! –°–º–æ—Ç—Ä–∏ –º–æ–π —Ä–æ—Ç!');
                for(let i = 0; i < 3; i++) {
                    setTimeout(() => addMessage('–ü–æ–ø–∫—ç—Ç', 'üò∏'), i * 500);
                }
                showBSOD();
            }
        }
        
        // ===== –°–¢–ê–†–¢ =====
        window.onload = function() {
            if (!loadGame()) {
                startDay1();
            } else {
                if (day === 1) startDay1();
                else if (day === 2) nextDay();
                else if (day === 3) finalDay();
            }
        };
    </script>
</body>
</html>